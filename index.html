<!DOCTYPE html>
<html class="preload" lang="en">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />

    <title>Japan Roadmap Planner</title>
    <meta name="description" content="Japan travel roadmap planner with Google Maps + Places." />

    <link rel="shortcut icon" href="favicon.png" />
    <link rel="stylesheet" href="styles.css" />
  </head>

  <body class="no-js">
    <header>
      <div class="mode-toggle">
        <button class="[ toggle-button ] [ js-mode-toggle ]">
          <span class="toggle-icon" aria-hidden="true"></span>
          <span class="[ toggle-text ] [ js-mode-toggle-text ]">Switch to dark theme</span>
        </button>
      </div>
    </header>

    <main>
      <section class="app-shell" id="planner">
        <div class="app-card">
          <div class="app-grid">
            <div class="map" id="map"></div>

            <div class="panel">
              <h2>Japan Roadmap Planner</h2>
              <div class="muted">
                This version can use <b>Google Maps</b> for the most accurate, real-world map detail ‚Äî if you add your own API key.
                Otherwise it falls back to OpenStreetMap.
              </div>

              <div class="notice" id="keyNotice">
                <b>Google Maps (recommended):</b> paste your API key below. It stays only in your browser (localStorage).
                <span class="smalllink" onclick="openKeyHelp()">How do I get a key?</span>
              </div>

              <label>Google Maps API Key (optional)</label>
              <div class="row">
                <input id="gmKey" placeholder="AIzaSy..." />
                <button class="btn secondary" onclick="saveKey()">Save</button>
              </div>

              <div class="row">
                <div>
                  <label>Trip name</label>
                  <input id="tripName" placeholder="Japan Trip" />
                </div>
                <div>
                  <label>Travel mode</label>
                  <select id="travelMode">
                    <option value="TRANSIT">Transit</option>
                    <option value="DRIVING">Driving</option>
                    <option value="WALKING">Walking</option>
                    <option value="BICYCLING">Bicycling</option>
                  </select>
                </div>
              </div>

              <label>Days</label>
              <div class="row">
                <input id="newDay" type="date" />
                <button class="btn" onclick="addDay()">Add day</button>
              </div>
              <div id="dayPills" class="pills"></div>

              <hr />

              <div class="row">
                <div>
                  <label>Category</label>
                  <select id="category">
                    <option value="sleep">Sleep / Hotel</option>
                    <option value="food">Foodspot</option>
                    <option value="activity">Activity</option>
                    <option value="move">Move / Transfer</option>
                  </select>
                </div>
                <div>
                  <label>Start</label>
                  <input id="startTime" type="time" />
                </div>
                <div>
                  <label>End</label>
                  <input id="endTime" type="time" />
                </div>
              </div>

              <label>Place / Address</label>
              <input id="place" placeholder="e.g., Shibuya Crossing, Tokyo" />

              <label>Notes</label>
              <textarea id="notes" placeholder="reservation, tickets, must-try dish, etc."></textarea>

              <div class="row" style="margin-top: 10px">
                <button class="btn" onclick="addStop()">Add stop</button>
                <button class="btn secondary" onclick="openDayRoute()">Open day route (Google)</button>
              </div>

              <div class="row" style="margin-top: 10px">
                <button class="btn secondary" onclick="makeShareLink()">Share link</button>
                <button class="btn secondary" onclick="exportJSON()">Export</button>
                <button class="btn secondary" onclick="importJSON()">Import</button>
                <button class="btn danger" onclick="resetAll()">Reset</button>
              </div>

              <div class="notice" id="status">Add a day to start planning.</div>

              <div style="font-weight: 900; margin-top: 14px">Stops (drag to reorder)</div>
              <div id="filters" class="chips" style="margin-top: 10px">
                <div class="chip on" data-cat="sleep" onclick="toggleFilter('sleep')">üõèÔ∏è Sleep</div>
                <div class="chip on" data-cat="food" onclick="toggleFilter('food')">üçú Food</div>
                <div class="chip on" data-cat="activity" onclick="toggleFilter('activity')">üéå Activity</div>
                <div class="chip on" data-cat="move" onclick="toggleFilter('move')">üöÜ Move</div>
              </div>

              <div id="entries" class="entries"></div>
              <div id="details" class="detailsCard" style="display: none"></div>

              <div class="timelineWrap">
                <div style="font-weight: 900; margin-top: 14px">Day timeline</div>
                <div id="timeline" class="timelineGrid"></div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>

    <!-- Scripts at the end so everything is loaded first -->
    <script src="dark-mode.js"></script>
    <script src="app.js"></script>
  </body>
</html>
